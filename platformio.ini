[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_port = COM14
monitor_port = COM14

lib_deps =
    bblanchon/ArduinoJson@^6.21.3
    adafruit/Adafruit Fingerprint Sensor Library@^2.1.3
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    arduino-libraries/NTPClient@^3.2.1
    dfrobot/DFRobotDFPlayerMini@^1.0.6

# SAFE optimization flags - proven stable
build_flags =
    -Os                    # Optimize for size
    -D CONFIG_ARDUINO_LOOP_STACK_SIZE=8192  # Increase loop stack
    -D CONFIG_ASYNC_TCP_RUNNING_CORE=1      # Safe TCP optimization
    -Wno-deprecated-declarations           # Silence deprecation warning
# Optional: Enable PSRAM if your board has it
; board_build.psram = enable

# Optional: Set partition scheme (use default if unsure)
; board_build.partitions = default.csv

# Enable Core Debugging (safe)
monitor_filters = 
    esp32_exception_decoder